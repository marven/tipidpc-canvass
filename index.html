<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>TipidPC Canvass Tool</title>
    <link rel="stylesheet" href="stylesheets/bootstrap.min.css">
    <style>
    html, body, .container {
      height: 100%;
    }
    textarea.form-control {
      height: 100%;
    }
    </style>
    <script src="javascripts/jquery.js"></script>
    <script src="javascripts/tipidparser.js"></script>
    <script>
    $(document).ready(function(){
        $('#myTable').hide();

        $( "button" ).click(function() {
            this.disabled = true;
            $('#myTable').show();

            var lines = $("#input").val().split('\n');
            var myitem;
            var total = 0;

            $("#myTable").find("tr:gt(0)").remove();

            for(var i = 0;i < lines.length;i++){
                
                if(lines[i] != '') {
                    myitem = tipidparser(lines[i]);
                    $('#myTable > tbody:last').append('<tr><td>'+(i+1)+'</td><td>'+myitem[0]+'</td><td>'+myitem[1]+'</td></tr>');
                    total += parseFloat(myitem[1]);
                }
            }

            $('#myTable tr:last').after('<tr><td colspan="3">Total: '+total+'</td></tr>');
            
            this.disabled = false;
        });
    });
    </script>
  </head>
  <body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-6">
                    <div class="form-group">
                        <textarea id="input" class="form-control" rows="10" placeholder="TipidPC item URL (e.g. http://www.tipidpc.com/viewitem.php?iid=1234567) per line"></textarea>
                    </div>
                    <button id="mybutton" class="btn btn-primary btn-lg">Go!</button>
            </div>
            <div class="col-md-6">
                <table id="myTable" class="table table-condensed">
                    <thead><tr><th>#</th><th>Name</th><th>Price</th></tr></thead>
                    <tbody></tbody>
                    <tfoot><tr><td colspan="3">Total: 0</td></tr></tfoot>
                </table>
            </div>
        </div>
    </div>
  </body>
</html>
